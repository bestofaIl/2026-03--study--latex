---
## Author
author:
  name: Абрамян Артём Арменович
  email: 1132249518@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Лабораторная работа №4"
subtitle: "Работа с графикой в LaTeX"
license: "CC BY"
---

# Цель работы

Цель данной работы — изучить возможности включения и манипулирования графикой в LaTeX, освоить различные способы позиционирования изображений, научиться работать с перекрестными ссылками.

# Задание

Выполнить следующие задания:

- Попробовать включить собственное изображение, заменив стандартные примеры.
- Исследовать возможности параметров `height`, `width`, `angle` и `scale`.
- Использовать параметр `width` для установки размера графики относительно `textwidth` и другой графики относительно `linewidth`. Протестировать их поведение с опцией `twocolumn` и без нее.
- Создать демонстрацию с использованием `lipsum` и попробовать различные спецификаторы позиционирования флоатов. Изучить, как различные спецификаторы взаимодействуют друг с другом.
- Добавить новые нумерованные части (разделы, подразделы, нумерованные списки) в тестовый документ и определить, сколько компиляций необходимо для корректной работы команд `label`.
- Добавить флоаты и проверить, что происходит при размещении `label` до `caption` вместо после; предсказать результат.
- Выяснить, что происходит при размещении `label` для уравнения после `end equation`.

# Теоретическое введение

Для включения графики в LaTeX используется пакет `graphicx`, который добавляет команду `includegraphics`. Этот пакет поддерживает различные форматы изображений: EPS, PNG, JPG и PDF.

Изображения в LaTeX обычно включаются как плавающие объекты (floats), чтобы избежать больших пустых промежутков на странице. Для управления позиционированием используются спецификаторы:

- `h` — 'Here' (здесь, если возможно)
- `t` — Top (верх страницы)
- `b` — Bottom (низ страницы)
- `p` — Page (отдельная страница только для флоатов)
- `H` — абсолютное позиционирование (требует пакет `float`)

Система перекрестных ссылок в LaTeX работает с помощью команд `label` и `ref`. Для корректной работы требуется минимум две компиляции документа.

Более подробно про работу с графикой в LaTeX см. в [@kotelnikov_chebotaev_book_latex2_ru; @lvovsky_book_latex_ru].

# Выполнение лабораторной работы

## Базовое включение графики

Начнем работу с базового включения изображений в документ. Для этого используется пакет `graphicx` и команда `includegraphics`. На рисунке [-@fig-001] показан простейший пример включения изображения в документ.

![Базовый пример включения изображения](image/fig01.png){#fig-001 width=70%}

## Манипулирование размерами графики

### Параметр width

Параметр `width` позволяет задать ширину изображения. Можно использовать как абсолютные значения (например, 5cm), так и относительные (например, 0.5 от ширины текста). На рисунке [-@fig-002] показан пример использования параметра `width`.

![Изображение с параметром width](image/fig02.png){#fig-002 width=70%}

### Параметр height

Аналогично ширине, можно задать высоту изображения с помощью параметра `height`. LaTeX автоматически сохраняет пропорции изображения (рис. [-@fig-003]).

![Изображение с параметром height](image/fig03.png){#fig-003 width=70%}

### Параметр scale

Параметр `scale` позволяет масштабировать изображение пропорционально. Например, `scale=0.5` уменьшит изображение в два раза (рис. [-@fig-004]).

![Использование параметра scale](image/fig04.png){#fig-004 width=70%}

### Поворот изображения

С помощью параметра `angle` можно повернуть изображение на заданный угол в градусах. На рисунке [-@fig-005] показан пример поворота изображения на 45 градусов.

![Поворот изображения с помощью angle](image/fig05.png){#fig-005 width=70%}

## Разница между textwidth и linewidth

Параметр `textwidth` — это ширина текстового блока на физической странице, тогда как `linewidth` — это текущая ширина, которая может локально отличаться. На рисунке [-@fig-006] показан пример использования `textwidth`.

![Пример с textwidth](image/fig06.png){#fig-006 width=70%}

Разница наиболее заметна при использовании опции класса `twocolumn`. В режиме двух колонок `linewidth` адаптируется к ширине колонки, а `textwidth` всегда относится к полной ширине страницы (рис. [-@fig-007]).

![Демонстрация разницы в режиме twocolumn](image/fig07.png){#fig-007 width=70%}

В обычном однокалоночном режиме эти значения одинаковы, но в `twocolumn` изображение с `width=0.5linewidth` будет занимать половину ширины колонки, а с `width=0.5textwidth` — половину всей страницы.

## Позиционирование флоатов

### Спецификаторы позиции

Можно использовать различные спецификаторы позиции для управления размещением изображений. На рисунке [-@fig-008] показан пример кода с различными спецификаторами.

![Пример с различными спецификаторами позиции](image/fig08.png){#fig-008 width=70%}

### Использование пакета float

Пакет `float` добавляет спецификатор `H`, который размещает изображение точно в месте его определения в коде. Это показано на рисунке [-@fig-009].

![Использование спецификатора H](image/fig09.png){#fig-009 width=70%}

Результат компиляции с различными флоатами можно увидеть на рисунке [-@fig-010].

![Результат компиляции с флоатами](image/fig10.png){#fig-010 width=70%}

## Перекрестные ссылки

### Механизм label и ref

Для автоматической нумерации элементов используется механизм меток. На рисунке [-@fig-011] показаны примеры использования `label` и `ref`.

![Примеры label и ref](image/fig11.png){#fig-011 width=70%}

### Правильное размещение label

Команда `label` всегда ссылается на предыдущую нумерованную сущность. Для флоатов `label` должна идти после команды `caption`. Правильный пример показан на рисунке [-@fig-012].

![Правильное размещение метки](image/fig12.png){#fig-012 width=70%}

### Неправильное размещение метки

Если поместить `label` перед `caption`, метка будет ссылаться на номер секции, а не на номер рисунка. Это демонстрируется на рисунке [-@fig-013].

![Неправильное размещение метки](image/fig13.png){#fig-013 width=70%}

При неправильном размещении ссылка указывает на неверный номер.

### Метки для уравнений

Для уравнений метка должна находиться внутри окружения `equation`, до команды закрывающей окружение. На рисунке [-@fig-014] показаны правильный и неправильный примеры.

![Метки для уравнений](image/fig14.png){#fig-014 width=70%}

Если метка размещена после закрытия окружения `equation`, она будет ссылаться на номер раздела, а не на номер уравнения.

### Количество компиляций

Из-за использования вспомогательного файла первая компиляция документа может показать вопросительные знаки вместо номеров ссылок (рис. [-@fig-015]).

![Первая компиляция с вопросительными знаками](image/fig15.png){#fig-015 width=70%}

После второй компиляции все ссылки становятся правильными (рис. [-@fig-016]).

![Вторая компиляция с правильными номерами](image/fig16.png){#fig-016 width=70%}

## Использование пакета hyperref

Пакет `hyperref` позволяет превратить перекрестные ссылки в гиперссылки. На рисунке [-@fig-017] показан пример подключения пакета.

![Подключение пакета hyperref](image/fig17.png){#fig-017 width=70%}

С опцией `hidelinks` ссылки имеют тот же цвет, что и обычный текст, но остаются кликабельными в PDF.

# Выводы

В ходе данной работы мы изучили продвинутые возможности работы с графикой в LaTeX. Освоили:

- Базовое включение графики с помощью пакета `graphicx`
- Манипулирование размерами изображений с помощью параметров `width`, `height`, `scale` и `angle`
- Разницу между `textwidth` и `linewidth`, особенно в режиме `twocolumn`
- Различные спецификаторы позиционирования флоатов (`h`, `t`, `b`, `p`, `H`)
- Правильное использование системы перекрестных ссылок с помощью `label` и `ref`
- Важность правильного размещения меток (после `caption` для флоатов, внутри окружения для уравнений)
- Необходимость минимум двух компиляций для корректной работы перекрестных ссылок
- Создание кликабельных гиперссылок с помощью пакета `hyperref`

Особое внимание было уделено распространенным ошибкам при размещении меток и способам их избежания.

# Список литературы{.unnumbered}

::: {#refs}
:::
